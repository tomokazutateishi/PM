# マルチエージェント実行例

このドキュメントでは、複数の生成AIエージェントがそれぞれ独立して役割をこなす実装例を示します。

---

## 実装方法1: プロンプトベースの役割指定

### 方法1-1: 個別エージェントの独立実行

各エージェントを個別に呼び出して、それぞれが独立してタスクを実行します。

#### 例: リスクマネージャーの独立実行

```
ユーザー: 
あなたはリスクマネージャーエージェント（agent-risk）です。
AGENTS_RISK.mdの定義に従って、以下のタスクを独立して実行してください：
- プロジェクト「UIUXサイト制作」のリスクを分析
- リスク登録簿を作成・更新
- 高優先度リスクがあれば、プロジェクトマネージャーに通知する形式で報告

実行後、結果を以下に保存してください：
案件/UIUXサイト制作/01_プロジェクト管理ドキュメント/リスク管理/
```

**期待される動作:**
1. agent-riskが独立してリスク分析を実行
2. リスク登録簿を生成
3. 高優先度リスクを検出した場合、通知形式で報告
4. 指定フォルダに保存

#### 例: 複数エージェントの並列実行

```
ユーザー: 
以下の3つのエージェントに、それぞれ独立してタスクを実行させてください：

1. リスクマネージャー（agent-risk）:
   - リスク登録簿を更新
   - 週次リスクレポートを作成

2. スケジュール管理（agent-schedule）:
   - 進捗を更新
   - ガントチャートを更新

3. コスト管理（agent-cost）:
   - コスト実績を更新
   - 予算差異を分析

各エージェントは独立して実行し、結果をそれぞれのフォルダに保存してください。
```

**期待される動作:**
- 3つのエージェントが同時に（または順次）独立して実行
- 各エージェントが自身の責任範囲でタスクを完了
- 結果をそれぞれの保存先に保存

---

## 実装方法2: 設定ファイルベースの実行

各エージェント用の設定ファイル（`AGENTS_RISK.md`、`AGENTS_SCHEDULE.md`など）を参照して実行します。

### 例: 設定ファイルを参照した実行

```
ユーザー: 
AGENTS_RISK.mdの定義に従って、リスクマネージャーエージェントとして動作してください。
プロジェクト「UIUXサイト制作」のリスク分析を実施してください。
```

**期待される動作:**
1. `AGENTS_RISK.md`を読み込んで役割を理解
2. リスクマネージャーとしての動作を実行
3. 独立してリスク分析を完了

---

## 実装方法3: ワークフローベースの協調実行

複数のエージェントが協調してタスクを実行します。

### 例: 統合レポートの生成

```
ユーザー: 
プロジェクトマネージャーエージェント（agent-pm）として、週次統合レポートを作成してください。
以下のエージェントから情報を収集して統合してください：
- agent-schedule: 進捗情報
- agent-cost: 予算情報
- agent-risk: リスク情報

各エージェントは独立して情報を提供し、agent-pmが統合します。
```

**期待される動作:**
1. agent-pmが各エージェントに情報要求
2. 各エージェントが独立して情報を提供
3. agent-pmが情報を統合してレポートを生成

---

## 実装方法4: スクリプトベースの自動実行

Pythonスクリプトなどで複数エージェントを自動実行します。

### 例: Pythonスクリプト（概念例）

```python
# multi_agent_executor.py（概念例）
# 注意: これは概念例です。実際の実装は環境に応じて調整が必要です。

def execute_risk_agent():
    """リスクマネージャーエージェントを実行"""
    prompt = """
    あなたはリスクマネージャーエージェント（agent-risk）です。
    AGENTS_RISK.mdの定義に従って、リスク分析を実施してください。
    """
    # AI API呼び出し（実際の実装は環境に応じて）
    return execute_ai_agent(prompt, agent_type="risk")

def execute_schedule_agent():
    """スケジュール管理エージェントを実行"""
    prompt = """
    あなたはスケジュール管理エージェント（agent-schedule）です。
    AGENTS_SCHEDULE.mdの定義に従って、進捗を更新してください。
    """
    return execute_ai_agent(prompt, agent_type="schedule")

def execute_parallel_agents():
    """複数エージェントを並列実行"""
    import concurrent.futures
    
    with concurrent.futures.ThreadPoolExecutor() as executor:
        risk_future = executor.submit(execute_risk_agent)
        schedule_future = executor.submit(execute_schedule_agent)
        
        risk_result = risk_future.result()
        schedule_result = schedule_future.result()
        
    return risk_result, schedule_result

# 実行
if __name__ == "__main__":
    results = execute_parallel_agents()
    print("並列実行完了")
```

---

## 実際の使用例（Cursor環境）

### 例1: リスク分析の独立実行

```
ユーザー: 
@agent-risk プロジェクト「UIUXサイト制作」のリスクを分析して、リスク登録簿を更新してください。

AI（agent-riskとして動作）:
1. プロジェクト情報を確認
2. リスクを特定・分析
3. リスク登録簿を更新
4. 高優先度リスクを検出した場合、通知
```

### 例2: 複数エージェントの順次実行

```
ユーザー: 
1. まず、@agent-schedule で進捗を更新してください
2. 次に、@agent-cost でコスト実績を更新してください
3. 最後に、@agent-risk でリスク状況を確認してください

各エージェントは独立して実行し、結果を保存してください。
```

### 例3: 統合タスクの実行

```
ユーザー: 
@agent-pm 週次統合レポートを作成してください。
以下のエージェントから情報を収集してください：
- agent-schedule: 進捗情報
- agent-cost: 予算情報
- agent-risk: リスク情報

各エージェントは独立して情報を提供し、あなたが統合してください。
```

---

## 注意事項

1. **独立性の維持**: 各エージェントは自身の責任範囲に集中し、他のエージェントのタスクを直接実行しない
2. **情報の一貫性**: 共有情報の更新タイミングを明確化
3. **競合の回避**: 同じファイルを同時に更新しないよう注意
4. **エラーハンドリング**: 各エージェントのエラーが他に影響しないよう設計

---

## 次のステップ

1. 各エージェント用の設定ファイルを作成（`AGENTS_RISK.md`、`AGENTS_SCHEDULE.md`など）
2. 実行方法を選択（プロンプトベース、スクリプトベースなど）
3. エージェント間の連携ルールを定義
4. 実際のプロジェクトで試行・改善
