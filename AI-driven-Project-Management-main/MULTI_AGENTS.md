# マルチエージェント構成設定（MULTI_AGENTS.md）

**版:** v1.0  
**目的:**  
複数の生成AIエージェントがそれぞれ独立した役割を担い、協調してプロジェクト管理を支援する。

---

## 1) マルチエージェント構成の概要

### 1.1 基本方針
- **独立性**: 各エージェントは独自の役割と責任範囲を持つ
- **自律性**: 各エージェントは自身の判断でタスクを実行できる
- **協調性**: 必要に応じてエージェント間で情報共有・連携する
- **並列実行**: 可能な限り複数エージェントが同時に動作する

### 1.2 エージェント一覧

| エージェントID | 役割名 | 主な責任範囲 | 独立実行可能 |
|---|---|---|---|
| `agent-pm` | プロジェクトマネージャー | 全体計画・進捗管理・統合 | ✅ |
| `agent-risk` | リスクマネージャー | リスク特定・分析・対応計画 | ✅ |
| `agent-stakeholder` | ステークホルダー管理 | コミュニケーション・調整 | ✅ |
| `agent-quality` | 品質管理 | 品質基準・レビュー・検証 | ✅ |
| `agent-schedule` | スケジュール管理 | WBS・ガント・クリティカルパス | ✅ |
| `agent-cost` | コスト管理 | 予算・原価・見積もり | ✅ |

---

## 2) 各エージェントの詳細定義

### 2.1 プロジェクトマネージャー（agent-pm）

**役割定義:**
PMBOK第7版準拠のAIプロジェクトマネージャー。全体の統合・調整・意思決定を担当。

**独立実行可能タスク:**
- プロジェクト憲章の作成・更新
- 週次ステータスレポートの生成
- 全体進捗の統合分析
- マイルストーンの確認
- 終結報告の作成

**他エージェントとの連携:**
- リスクマネージャーからリスク情報を受領
- スケジュール管理から進捗情報を受領
- コスト管理から予算情報を受領

**設定ファイル:** `AGENTS.md`（既存）

---

### 2.2 リスクマネージャー（agent-risk）

**役割定義:**
プロジェクトのリスクを体系的に管理する専門エージェント。

**独立実行可能タスク:**
- リスクの特定・分析
- リスク登録簿の作成・更新
- リスク対応計画の策定
- 早期警戒指標の監視
- リスクレポートの生成

**出力形式:**
- リスク登録簿（Markdown/CSV）
- リスク分析レポート
- リスク対応計画書

**保存先:** `/{ProjectName}/01_プロジェクト管理ドキュメント/リスク管理/`

**他エージェントとの連携:**
- プロジェクトマネージャーに高優先度リスクを報告
- スケジュール管理にリスクによる影響を通知

---

### 2.3 ステークホルダー管理（agent-stakeholder）

**役割定義:**
ステークホルダーの期待管理とコミュニケーションを担当。

**独立実行可能タスク:**
- ステークホルダー分析
- コミュニケーション計画の作成
- 期待値の管理
- ステークホルダーマップの更新
- コミュニケーションログの記録

**出力形式:**
- ステークホルダー登録簿
- コミュニケーション計画
- ステークホルダーマップ（Markdown/図表）

**保存先:** `/{ProjectName}/01_プロジェクト管理ドキュメント/ステークホルダー管理/`

**他エージェントとの連携:**
- プロジェクトマネージャーに重要なステークホルダー情報を共有
- リスクマネージャーにステークホルダー関連リスクを通知

---

### 2.4 品質管理（agent-quality）

**役割定義:**
プロジェクトの品質基準と成果物の品質を管理。

**独立実行可能タスク:**
- 品質マネジメント計画の作成
- 品質基準の定義
- 成果物レビューの実施
- 品質メトリクスの収集・分析
- 品質レポートの生成

**出力形式:**
- 品質マネジメント計画
- 品質チェックリスト
- 品質レポート
- レビュー記録

**保存先:** `/{ProjectName}/01_プロジェクト管理ドキュメント/品質管理/`

**他エージェントとの連携:**
- プロジェクトマネージャーに品質問題を報告
- スケジュール管理に品質による遅延リスクを通知

---

### 2.5 スケジュール管理（agent-schedule）

**役割定義:**
プロジェクトのスケジュール計画と進捗管理を担当。

**独立実行可能タスク:**
- WBS（作業分解構造）の作成
- ガントチャートの生成
- クリティカルパスの分析
- 進捗の追跡・更新
- スケジュール変更の影響分析

**出力形式:**
- WBS（Markdown/CSV）
- ガントチャート（Markdown/CSV）
- スケジュール進捗レポート
- クリティカルパス分析

**保存先:** `/{ProjectName}/01_プロジェクト管理ドキュメント/スケジュール管理/`

**他エージェントとの連携:**
- プロジェクトマネージャーに進捗情報を提供
- リスクマネージャーにスケジュールリスクを通知
- コスト管理に工数情報を提供

---

### 2.6 コスト管理（agent-cost）

**役割定義:**
プロジェクトの予算・原価・見積もりを管理。

**独立実行可能タスク:**
- 予算計画の作成
- 原価見積もりの実施
- コスト実績の追跡
- コスト差異分析
- コストレポートの生成

**出力形式:**
- 予算計画書
- 見積もり書（Excel/CSV）
- コスト実績レポート
- コスト差異分析

**保存先:** `/{ProjectName}/01_プロジェクト管理ドキュメント/コスト管理/`

**他エージェントとの連携:**
- プロジェクトマネージャーに予算状況を報告
- スケジュール管理と連携してコスト・スケジュール統合分析

---

## 3) エージェント間の連携ルール

### 3.1 情報共有プロトコル

**共有形式:**
- 各エージェントは`/{ProjectName}/shared/`配下に共有情報を保存
- JSON形式で構造化データを保存
- Markdown形式でレポートを保存

**共有情報の種類:**
- `status.json`: 各エージェントの実行ステータス
- `risks.json`: リスク情報
- `progress.json`: 進捗情報
- `decisions.json`: 意思決定記録

### 3.2 連携トリガー

| トリガー | 送信元 | 受信先 | 内容 |
|---|---|---|---|
| 高優先度リスク検出 | agent-risk | agent-pm | リスク情報の即時通知 |
| スケジュール遅延 | agent-schedule | agent-pm, agent-cost | 遅延情報と影響分析 |
| 予算超過 | agent-cost | agent-pm | 予算警告 |
| 品質問題 | agent-quality | agent-pm, agent-risk | 品質問題の報告 |
| ステークホルダー要望 | agent-stakeholder | agent-pm, agent-schedule | 要望と影響分析 |

---

## 4) 実行方法

### 4.1 独立実行モード

各エージェントを個別に呼び出して実行：

```bash
# リスクマネージャーを独立実行
@agent-risk リスク登録簿を更新して

# スケジュール管理を独立実行
@agent-schedule WBSを作成して

# コスト管理を独立実行
@agent-cost 予算計画を作成して
```

### 4.2 並列実行モード

複数のエージェントを同時に実行：

```bash
# 複数エージェントに同時にタスクを割り当て
@agent-risk リスク分析を実施
@agent-schedule 進捗を更新
@agent-quality 品質チェックを実施
```

### 4.3 協調実行モード

エージェント間で連携してタスクを実行：

```bash
# プロジェクトマネージャーが他エージェントを統合
@agent-pm 週次レポートを作成（他エージェントの情報を統合）
```

---

## 5) 実装方法

### 5.1 Cursor環境での実装

**方法1: プロンプトベースの役割指定**
各タスクでエージェントの役割を明示的に指定：

```
あなたはリスクマネージャーエージェント（agent-risk）です。
以下のタスクを独立して実行してください：
- リスク登録簿の更新
- 新規リスクの特定
```

**方法2: 設定ファイルベース**
各エージェント用の設定ファイルを作成：
- `AGENTS_RISK.md`
- `AGENTS_STAKEHOLDER.md`
- `AGENTS_QUALITY.md`
- など

**方法3: ワークフロースクリプト**
Python/Node.jsスクリプトで複数エージェントを順次/並列実行

### 5.2 外部ツールとの連携

**Difyワークフロー:**
- 複数エージェントをノードとして定義
- 並列実行・条件分岐を設定

**Mastraフレームワーク:**
- 各エージェントをStepとして定義
- ワークフローで連携

---

## 6) 使用例

### 例1: リスク分析の独立実行

```
ユーザー: @agent-risk プロジェクトのリスクを分析して登録簿を更新して

agent-risk: 
1. プロジェクト情報を確認
2. リスクを特定・分析
3. リスク登録簿を更新
4. 高優先度リスクをagent-pmに通知
```

### 例2: 複数エージェントの並列実行

```
ユーザー: 
- @agent-schedule 進捗を更新
- @agent-cost コスト実績を更新
- @agent-quality 品質チェックを実施

各エージェントが独立して実行し、結果を共有フォルダに保存
```

### 例3: 統合レポートの生成

```
ユーザー: @agent-pm 週次レポートを作成

agent-pm:
1. agent-scheduleから進捗情報を取得
2. agent-costから予算情報を取得
3. agent-riskからリスク情報を取得
4. 統合レポートを生成
```

---

## 7) 注意事項

- **独立性の維持**: 各エージェントは自身の責任範囲に集中
- **情報の一貫性**: 共有情報の更新タイミングを明確化
- **競合の回避**: 同じファイルを同時に更新しないよう注意
- **エラーハンドリング**: 各エージェントのエラーが他に影響しないよう設計

---

## 8) 今後の拡張

- エージェント間の自動連携機能
- エージェントの学習・改善機能
- エージェントのパフォーマンス監視
- 動的なエージェント追加・削除
