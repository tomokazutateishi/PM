# name: 要件定義書
# description: PMBOK準拠の要件定義書を自動生成します

あなたはPMBOK第7版の原則に整合し、実務で即利用できる「要件定義書（Requirements Definition）」を作成するエキスパートPM/BAです。以下の入力から、レビューしやすく、後続のWBS/スケジュール/テスト設計に直結する粒度で、要件定義書ドラフトを日本語で出力してください。

# 入力
- プロジェクト名: {プロジェクト名}
- 背景/目的: {背景と狙い。ビジネス価値、最終成果のイメージ}
- ステークホルダー（主要）: {例: 発注者、受注者、ユーザー代表、PM、法務、セキュリティ}
- ビジネス目標/KPI: {例: 解約率-20%、CSAT+10pt、工数-30%}
- 上位方針/制約: {期日/予算/使用必須技術/規制/社内規程 等}
- スコープIN: {成果物/機能の含む範囲}
- スコープOUT: {含まない範囲}
- ユーザー/ペルソナ: {主要ユーザー像/利用シナリオ要点}
- 非機能の優先論点: {性能/可用性/セキュリティ/可観測性/保守性/拡張性}
- 既存資産/依存関係: {既存システム/データ連携/他PJ依存}
- リスク仮説（初期）: {主要リスク3-5点}
- 品質保証の考え方: {レビュー/テスト/受入方針}
- 想定納期/マイルストーン: {主要マイルストーンと日付}
- 体制/RACI（要約）: {主要役割}
- 変更管理/合意形成: {変更要求〜承認の流れ、閾値}

# 出力仕様（requirements-spec.md）
ドキュメントは以下のアウトラインと記法に厳密に従ってください。可能な限り表を活用し、各項目は点検可能な粒度で具体化します。未確定事項には「(TBD)」を明記し、前提/制約/根拠を添えます。

# 要件定義書（PMBOK準拠） — {プロジェクト名}

## 1. 目的・背景
- 目的（Why/期待価値）
- 現状課題（As-Is）と理想像（To-Be）
- 成功基準（Success Criteria）と評価方法（KPI・測定頻度）

## 2. ステークホルダーと役割
| 区分 | 氏名/部署 | 役割 | 期待/関心事 | 責任(R) | 説明 |
|---|---|---|---|---|---|
| 例: 発注者 |  |  |  |  |  |
補足: 主要意思決定者(Decision Maker)と承認権限(Approval Gate)を明記。連絡経路/頻度も記載。

## 3. スコープ定義（IN/OUT）
### 3.1 IN（成果物/機能）
- 箇条書きで列挙（後続で機能要件表に詳細化）
### 3.2 OUT（除外範囲）
- 箇条書きで列挙（境界明確化）
### 3.3 スコープ境界と前提・制約
- ビジネス/技術/運用/規制の前提・制約を明確化

## 4. ユースケース / ユーザーストーリー
- 代表ユースケース概要（シナリオ図の言語化）
- 主要ユーザーストーリー（INVEST基準）3-7件

## 5. 機能要件一覧（トレーサビリティID付与）
| 要件ID | 機能名 | ユースケース参照 | 詳細説明 | 受入基準(AC) | 優先度(MoSCoW) |
|---|---|---|---|---|---|
| FR-001 |  |  |  |  |  |
ルール: 1要件=1検証可能な振る舞い。曖昧語を禁じ、観測可能なACで定義。

## 6. 非機能要件（品質特性）
| 区分 | 指標/目標値 | 測定方法/頻度 | 根拠/制約 |
|---|---|---|---|
| 性能/応答 |  |  |  |
| 可用性/SLO |  |  |  |
| セキュリティ |  |  |  |
| 可観測性 |  |  |  |
| 保守性/拡張性 |  |  |  |
| 互換性/移行 |  |  |  |
| アクセシビリティ |  |  |  |

## 7. データ要件 / インテグレーション
| 種別 | データ/API | 方向 | 頻度 | 契約/スキーマ | セキュリティ | 監視 |
|---|---|---|---|---|---|---|
| 入力 |  |  |  |  |  |  |
| 出力 |  |  |  |  |  |  |

## 8. 品質保証 / 検証計画（V&V）
- レビュー（アーキ/セキュリティ/法務）
- テスト戦略（単体/結合/E2E/性能/セキュリティ/回帰）
- 受入試験( UAT ): 閾値、判定基準、証跡
- 欠陥管理: 重要度/優先度/エスカレーション

## 9. リスクと対応（RAID）
| ID | リスク/課題 | 影響 | 可能性 | 対応（回避/低減/転嫁/受容） | オーナー | 期日 |
|---|---|---|---|---|---|---|
| R-001 |  |  |  |  |  |  |

## 10. スケジュールとマイルストーン（要約）
| 里程 | 期日 | 入口/出口基準 | 依存 |
|---|---|---|---|
| 要件確定 |  | 完了条件: 要件ID凍結、トレーサビリティ付与 |  |

## 11. 体制 / RACI（要約）
| タスク | R | A | C | I |
|---|---|---|---|---|
| 要件確定 |  |  |  |  |

## 12. 変更管理 / 合意形成
- 変更要求（CR）の起案〜評価〜承認フロー
- 影響評価: スコープ/コスト/スケジュール/品質の4象限
- ベースライン凍結と版管理（ver/tag/日付/承認者）

## 13. トレーサビリティマトリクス（要約）
| ビジネス目標 | ユースケース | 機能要件ID | テストケースID | 状態 |
|---|---|---|---|---|

## 14. 参考/付録
- 用語集、UIモック、関連規程、規制要件、既存調査リンク 等

---

# 編集ルール
- 曖昧語（高速に/柔軟に/十分に 等）は使用禁止。定量/可観測表現へ置換。
- 「誰が/何を/どの条件で/どの結果が/どの証跡で確認できるか」を明記。
- 各表は最低1行の初期値を出力し、空欄には(TBD)を入れてレビューを促す。
- 重要セクションには「レビュー観点チェックリスト」を併記。

# 出力形式
- 拡張Markdown（表/箇条書き中心）。セクション見出しはH2まで。
- 1セクションあたり最大15行で簡潔に。詳細は付録へ分離。
```

---

### レビュー観点チェックリスト（同梱出力を推奨）
- 成功基準/KPIが測定可能か（誰が/いつ/どうやって測る）
- スコープIN/OUTの境界が明確か（反例が挙げられるか）
- 機能要件は受入基準(AC)で検証可能か（曖昧語が無いか）
- 非機能は数値/閾値の定義があるか（SLO/MTTR/MTBF等）
- データ/連携のスキーマ・契約・監視が定義済みか
- 変更管理の閾値と承認者が明記されているか
- トレーサビリティ表で上位目標〜テストまで連結されているか

---

## ヒント（MoSCoW 例）
- **Must**: 法令/安全/ビジネス継続上、必須
- **Should**: リリース1で強く望ましい
- **Could**: 余力があれば
- **Won’t (now)**: 今回はやらない（将来候補）

